(this.webpackJsonprizgigi=this.webpackJsonprizgigi||[]).push([[0],[,,function(e,n,t){e.exports={player:"Player_player__3JoQn",turn:"Player_turn__2Oivs",heading:"Player_heading__3-qsD",guessbox:"Player_guessbox__M1sZ7",numberbox:"Player_numberbox__1Mfmi",number:"Player_number__23NUq"}},function(e,n,t){e.exports={gameHeader:"Game_gameHeader__OrQaB",gameProgress:"Game_gameProgress__8mlIl",playersList:"Game_playersList__3TVT_",phaseButton:"Game_phaseButton__1Euq-",gameError:"Game_gameError__KAxTe"}},,,,function(e,n,t){e.exports={guess:"Guess_guess__ylwjR",guessPhase:"Guess_guessPhase__2wCBS",current:"Guess_current__PK6Y3"}},,,,,,,,,function(e,n,t){},function(e,n,t){},,function(e,n,t){"use strict";t.r(n);var s=t(1),r=t.n(s),u=t(9),a=t.n(u),c=(t(16),t.p,t(17),t(7)),l=t.n(c),o=t(0),i=function(e){return Object(o.jsx)("span",{className:"".concat(l.a.guess," ").concat(e.round==e.currentRound&&null!=e.result&&l.a.current,"  ").concat(e.round==e.currentRound&&null==e.result&&l.a.guessPhase),children:null==e.guess?Object(o.jsx)(o.Fragment,{children:"-"}):null==e.result?e.guess:e.guess===e.result?Object(o.jsx)("span",{style:{color:"green"},children:e.guess}):Object(o.jsxs)("span",{style:{color:"red"},children:[e.result," (",e.guess,")"]})})},g=t(2),d=t.n(g),m=function(e){var n=function(n){return e.player.results.length>n?e.player.results[n]:null};return Object(o.jsxs)("div",{className:"".concat(d.a.player," ").concat(e.game.turn==e.player.id&&d.a.turn),children:[Object(o.jsxs)("div",{className:d.a.heading,children:[Object(o.jsxs)("span",{children:[e.player.name," ",Object(o.jsx)("span",{className:d.a.numberbox,children:function(){for(var n=[],t=function(t){var s=!1;("guess"===e.game.phase&&e.player.guesses.length==e.game.round+1&&e.player.guesses[e.game.round]==t||"play"===e.game.phase&&e.player.results.length==e.game.round+1&&e.player.results[e.game.round]==t)&&(s=!0),n.push(Object(o.jsx)("span",{className:d.a.number,"data-selected":s,onClick:function(){return n=t,void("guess"==e.game.phase?e.setNextGuess(e.player.name,n):e.setNextResult(e.player.name,n));var n},children:t},t))},s=0;s<=e.game.rounds[e.game.round];s++)t(s);return Object(o.jsx)(o.Fragment,{children:n})}()})]}),Object(o.jsxs)("span",{children:[e.points," Pkt"]})]}),Object(o.jsx)("div",{className:d.a.guessbox,children:e.game.rounds.map((function(t,s){return Object(o.jsx)(i,{guess:(r=s,e.player.guesses.length>r?e.player.guesses[r]:null),result:n(s),round:s,currentRound:e.game.round});var r}))})]})},f=t(10),h=t(11),j=t(6),p=t(3),b=t.n(p),O=[1,2,3,4,5,6,7,8,9,10,11,10,9,8,7,6,5,4,3,2,1],x=function(e){var n=Object(s.useState)([]),t=Object(j.a)(n,2),r=t[0],u=t[1],a=Object(s.useState)(-1),c=Object(j.a)(a,2),l=c[0],i=c[1],g=Object(s.useState)("guess"),d=Object(j.a)(g,2),p=d[0],x=d[1],_=Object(s.useState)(0),N=Object(j.a)(_,2),P=N[0],S=N[1],k=function(e,n){var t=r.find((function(n){return n.name==e}));if(null!=t){if(t.guesses.length<l+1)t.guesses.push(0);else{if(t.guesses[l]+n>O[l]||t.guesses[l]+n<0)return;t.guesses[l]=t.guesses[l]+n}u((function(e){return e.map((function(e){return e.name===t.name?t:e}))}))}},w=function(e,n){var t=r.find((function(n){return n.name==e}));if(null!=t){if(t.results.length<l+1)t.results.push(0);else{if(t.results[l]+n>O[l]||t.results[l]+n<0)return;t.results[l]=t.results[l]+n}u((function(e){return e.map((function(e){return e.name===t.name?t:e}))}))}},E=function(e,n){var t=r.find((function(n){return n.name==e}));null!=t&&(n>O[l]||n<0||(t.guesses.length<l+1?t.guesses.push(n):t.guesses[l]=n,u((function(e){return e.map((function(e){return e.name===t.name?t:e}))}))))},G=function(e,n){var t=r.find((function(n){return n.name==e}));null!=t&&(n>O[l]||n<0||(t.results.length<l+1?t.results.push(n):t.results[l]=n,u((function(e){return e.map((function(e){return e.name===t.name?t:e}))}))))},R=function(){if(!(l<0))if("guess"==p){if(!r.every((function(e){return e.guesses.length===l+1})))return;u((function(e){return e.map((function(e){return e.results.length<l+1&&e.results.push(0),e}))})),x("play")}else{if(!r.every((function(e){return e.results.length===l+1})))return;u((function(e){return e.map((function(e){return e.guesses.length<=l+1&&e.guesses.push(0),e}))})),x("guess"),i((function(e){return e+1})),P+1===r.length?S(0):S((function(e){return e+1}))}},C=Object(s.useRef)();C.current=R,Object(s.useEffect)((function(){function e(e){"Enter"===e.key?C.current():"F12"===e.key?I.current("download"):"F2"===e.key&&(localStorage.removeItem("game"),window.location="/")}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(s.useEffect)((function(){P<0||0==r.length||(console.log("saving"),localStorage.setItem("game",B()))}),[r,P,p,l]),Object(s.useEffect)((function(){var e=localStorage.getItem("game");if(null!=e){var n=JSON.parse(e);u(n.players),S(n.game.turn),x(n.game.phase),i(n.game.round)}}),[]);var F=function(e){var n,t=0,s=Object(f.a)(r);try{for(s.s();!(n=s.n()).done;){var u=n.value;u.results.length>e&&(t+=u.results[e])}}catch(a){s.e(a)}finally{s.f()}return t},B=function(e){var n={game:{rounds:O,round:l,phase:p,turn:P},players:r},t=JSON.stringify(n);if(null==e||"return"===e)return t;if("download"==e){var s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(n))),s.setAttribute("download","game.json"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},I=Object(s.useRef)();return I.current=B,Object(o.jsxs)("div",{children:[-1===l?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{onClick:function(){!function(e){if(!r.some((function(n){return n.name===e}))){var n={id:r.length,name:e,guesses:[],results:[]};u((function(e){return[].concat(Object(h.a)(e),[n])}))}}(window.prompt("Please enter name:"))},children:"Add Player"}),Object(o.jsx)("button",{onClick:function(){return i(0)},disabled:r.length<2,children:"Start"})]}):Object(o.jsx)(y,{game:{rounds:O,round:l,phase:p,turn:P}}),Object(o.jsx)("div",{className:b.a.playersList,children:r.map((function(e){return Object(o.jsx)(m,{player:e,points:(n=e,n.results.length>n.guesses.length?"-":n.results.map((function(e,t){var s=n.guesses[t],r=n.results[t];return s==e?s:0===s?-r:-s})).reduce((function(e,n){return e+n}),0)),addToNextGuess:k,addToNextResult:w,setNextGuess:E,setNextResult:G,game:{rounds:O,round:l,phase:p,turn:P}});var n}))}),r.every((function(e){return e.results.length===l+1}))&&F(l)>O[l]&&Object(o.jsx)(v,{children:"Warnung! Mehr Stiche (".concat(F(l),") als Karten (").concat(O[l],").")}),r.every((function(e){return e.results.length===l+1}))&&F(l)<O[l]&&Object(o.jsx)(v,{children:"Warnung! Weniger Stiche (".concat(F(l),") als Karten (").concat(O[l],").")}),l>=0&&l<O.length&&Object(o.jsx)("div",{className:b.a.phaseButton,onClick:R,children:"NextRound"})]})},y=function(e){return e.game.round<e.game.rounds.length?Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:b.a.gameHeader,children:[Object(o.jsxs)("span",{children:["Runde ",e.game.round+1," / ",e.game.rounds.length]}),Object(o.jsxs)("span",{children:["Phase: ","guess"===e.game.phase?"Ansage":"Spiel"]}),Object(o.jsxs)("span",{children:[e.game.rounds[e.game.round]," ",e.game.rounds[e.game.round]>1?"Karten":"Karte"]})]}),Object(o.jsx)("div",{className:b.a.gameProgress,children:e.game.rounds.map((function(n,t){return Object(o.jsx)("span",{"data-past":e.game.round>t,"data-current":e.game.round==t,children:n})}))})]}):Object(o.jsx)("div",{className:b.a.gameHeader,children:"Game Over."})},v=function(e){return Object(o.jsx)("div",{className:b.a.gameError,children:e.children})};var _=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(x,{})})},N=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,20)).then((function(n){var t=n.getCLS,s=n.getFID,r=n.getFCP,u=n.getLCP,a=n.getTTFB;t(e),s(e),r(e),u(e),a(e)}))};a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(_,{})}),document.getElementById("root")),N()}],[[19,1,2]]]);
//# sourceMappingURL=main.8c0bbb55.chunk.js.map